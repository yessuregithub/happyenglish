<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>哈彼英语</title>
		<link href="css/mui.min.css" rel="stylesheet" />
		<link href="css/style.css" rel="stylesheet" />
	</head>
	<body>
		<div id="orientLayer">
			<div class="wt-box">
				<div class="wt-bg"><img src="images/gou-bg.jpg"></div>
				<a href="javascript:void(0)" onclick="document.getElementById('light').style.display='block';document.getElementById('fade').style.display='block'"
				 class="wt-return"></a>
				<a href="index.html" class="wt-return"></a>
				<div class="zhibo-box">
					<div class="zhibo-top mui-clearfix">
						<div class="kt">
							<img src="images/hb.jpg">
							<div class="txt-box">
								<h4>距离-上课还有</h4>
								<span>10:00</span>
							</div>
						</div>
						<div class="laoshi-btn">
							<div class="laoshi-list mui-clearfix">
								<a href="" class="yin"><span class="pingbi"></span></a>
								<a href="" class="shua"></a>
								<a href="" class="ce"></a>
								<a href="javascript:void(0)" onclick="document.getElementById('light-kf').style.display='block';document.getElementById('fade').style.display='block'"
								 class="kf" </a> </div> <div class="laoshi-sp">
									<div class="img-box">老师视频</div>
							</div>
						</div>
					</div>

					<ul class="zhibo-list mui-clearfix">
						<li>

							<div class="mui-clearfix">
								<div class="name">name1</div>
								<div class="jin"><img src="images/jibi.png"><span>0</span></div>
							</div>

							<div class="img-box">
								<div style="width:100%;height:100%;background-color:#000000">
									<div id="video" style="width:100%;height:100%;background-color:#1fffff;margin:1px 1px 1px 1px">
									</div>
								</div>
								<span class="shexiangtou"></span>
							</div>
						</li>
						<li>
							<div class="mui-clearfix">
								<div class="name">name2</div>
								<div class="jin" id="pusher"><img src="images/jibi.png"><span>0</span></div>
							</div>
							<div class="img-box">
								<div style="width:100%;height:100%;background-color:#000000">
									<div id="v2" style="width:100%;height:100%;background-color:#1fffff;margin:1px 1px 1px 1px">
									</div>
								</div>
								<span class="shexiangtou"></span>
							</div>
						</li>
						<li>
							<div class="mui-clearfix">
								<div class="name">name3</div>
								<div class="jin"><img src="images/jibi.png"><span>0</span></div>
							</div>
							<div class="img-box">
								<img src="images/wsx.jpg">
								<span class="shexiangtou"></span>
							</div>
						</li>
						<li>
							<div class="mui-clearfix">
								<div class="name">name4</div>
								<div class="jin"><img src="images/jibi.png"><span>0</span></div>
							</div>
							<div class="img-box">
								<img src="images/pingbi.jpg">
								<span class="shexiangtou"><img src="images/pb.png"></span>
							</div>
						</li>
					</ul>

				</div>
			</div>
		</div>
		<div id="light" class="white_content">
			<h4>确定要退出挑战吗？</h4>
			<div class="tan-box">
				<a class="close" href="javascript:void(0)" onclick="document.getElementById('light').style.display='none';document.getElementById('fade').style.display='none'">取消</a>
				<a href="">确定</a>
			</div>
		</div>
		<div id="light-kf" class="kf-tan">
			<div class="img-box"> </div>
			<span>识别二维码联系客服</span>
		</div>

		<div class="tishi-tan">
			<p>已屏蔽其他学生声音</p>
		</div>

		<div class="tishi-tan">
			<p>已打开其他学生声音</p>
		</div>

		<div class="tishi-tan">
			<p>已屏蔽其他学生影像</p>
		</div>

		<div class="tishi-tan">
			<p>已打开其他学生影像</p>
		</div>
		<!---已打开其他学生影像-end--->



		<!--		<script src="js/mui.min.js"></script> -->
		<script src="js/jquery-1.8.3.min.js"></script>
		<script src="js/rem.js"></script>
		<script src="js/mui.js"></script>

		<script>
			var r, pusher, player2;
			var fn;


			function createvideo(videoid, divid, url) {
				var odiv = document.getElementById(divid);
				var left = odiv.getBoundingClientRect().left;
				var top = odiv.getBoundingClientRect().top;
				var width = odiv.getBoundingClientRect().width;
				var height = odiv.getBoundingClientRect().height;
				var player = plus.video.createVideoPlayer(videoid, {
					src: url,
					top: top,
					left: left,
					width: width,
					height: height,
				});
				plus.webview.currentWebview().append(player);
				return player;
			}

			function createpusher(videoid, divid, url) {
				var pusher = null;
				var odiv = document.getElementById(divid);
				var left = odiv.getBoundingClientRect().left;
				var top = odiv.getBoundingClientRect().top;
				var width = odiv.getBoundingClientRect().width;
				var height = odiv.getBoundingClientRect().height;
				pusher = new plus.video.LivePusher(videoid, {
					url: url,
					mode: 'SD',
					top: top,
					left: left,
					width: width,
					height: height,
				});
				return pusher;
			}

			function plusReady() {
				plus.screen.lockOrientation("landscape");
			//	setTimeout(laterdo, 3000);
			//	return;
				var audio = plus.audio.createPlayer("_doc/audio/Recorder_006.wav");
				audio.play(function() { //播放完成回调 
					alert("Audio play success!");
				}, function(e) { //失败回调 
					alert("Audio play error: " + e.message);
				});

			}

			function laterdo() {
				pusher = createpusher("pusher", "video", "rtmp://47.241.111.251/live?vhost=rotate.localhost/123");

				player2 = createvideo('videoid2', 'v2', 'rtmp://47.241.111.251/live/123');
				player2.play();

				pusher.start();

				r = plus.audio.getRecorder();
				if (r == null) alert('can not found recorder');
				r.record({
					filename: "_doc/audio/"
				}, function(p) {
					alert("Audio record success!" + p);
					fn = p;
				}, function(e) {
					alert("Audio record failed: " + e.message);
				});

				setTimeout(lateragain, 5000);

			}

			function lateragain() {
				r.stop();
				pusher.stop();
				player2.stop();

				var audio = plus.audio.createPlayer(fn);
				audio.play(function() { //播放完成回调 
					alert("Audio play success!");
				}, function(e) { //失败回调 
					alert("Audio play error: " + e.message);
				});
			}
			document.addEventListener('plusready', plusReady, false);
		</script>
	</body>
</html>
